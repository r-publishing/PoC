(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[6],{713:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.split("/").slice(1).join("")}},714:function(e,t,a){"use strict";a(3);var n=a(16),c=(a(715),a(40)),r=a(14);t.a=function(e){e.id;return Object(r.jsxs)(n.r,{detail:!1,"data-v-c9595389":"",children:[Object(r.jsx)("div",{className:"IconContainer","data-v-c9595389":"",children:Object(r.jsx)(n.o,{icon:c.l,size:"large",color:"secondary","data-v-c9595389":""})}),Object(r.jsxs)(n.v,{className:"ion-text-wrap","data-v-c9595389":"",children:[Object(r.jsx)("h4",{"data-v-c9595389":"",children:Object(r.jsx)(n.G,{animated:!0,style:{width:"80%"},"data-v-c9595389":""})}),Object(r.jsx)("h4",{"data-v-c9595389":"",children:Object(r.jsx)(n.G,{animated:!0,style:{width:"60%"},"data-v-c9595389":""})})]})]})}},715:function(e,t,a){},716:function(e,t){},717:function(e,t,a){},718:function(e,t,a){"use strict";var n=a(1),c=a.n(n),r=a(28),s=a(5),o=a(21),i=a(3),l=a.n(i),d=a(16),u=a(57),b=a(42),j=a(724),p=a(15),f=a(43),g=a.n(f),m=a(45),v=a(44),O=a(56),h=a(95),x=a(328),y=function(){var e=Object(s.a)(c.a.mark((function e(t,a){var n,r,s,i,l,d,u,b,j,f;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=v.DID,e.t1=p.a,e.t2=p.a,e.t3={},e.next=6,m.a;case 6:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=g.a.getResolver(),e.t7=(0,e.t1)(e.t5,e.t6),e.t8={resolver:e.t7},n=new e.t0(e.t8),r=t.signatures[a],s=Object(O.base64urlToJSON)(r.protected).kid,e.next=16,n.resolve(s);case 16:return i=e.sent,l=Object.assign({},t),d=Object.fromEntries(Object.entries(l.signatures).filter((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return parseInt(n)<parseInt(a)}))),l.signatures=d,e.next=22,Object(x.encodePayload)(l);case 22:if(u=e.sent,b=u.cid,j=Object(O.encodeBase64Url)(b.bytes),e.prev=25,(f=Object(h.verifyJWS)(r.protected+"."+j+"."+r.signature,i.publicKey)).id!==s||!l.scheme||l.scheme[a]!==f.id){e.next=30;break}return console.info(a+" Signature valid"),e.abrupt("return",!0);case 30:e.next=36;break;case 32:return e.prev=32,e.t9=e.catch(25),console.info(a+" Signature not valid. "+e.t9),e.abrupt("return",!1);case 36:return e.abrupt("return",!1);case 37:case"end":return e.stop()}}),e,null,[[25,32]])})));return function(t,a){return e.apply(this,arguments)}}(),I=y,S=a(24),w=(a(717),a(94)),k=a(122),N=a(14),C=[{selector:".SignatureRequiredBtn",content:"If the photo looks legit you can now attest it and put your signature."}],T=[{selector:".attestation-step-file",content:"Pick a photo you wish to upload. Image data will be stored on-chain in an encrypted form."},{selector:".attestation-step-name",content:"Choose a name for your new NFT."},{selector:".attestation-step-upload",content:"Now press upload to begin the attestation process."},{selector:".attestation-step-set-price",content:"How much do you think this is worth? Probably not a lot so we're just going to put a small number for you."}],A=[{selector:".attestation-step-set-price",content:"How much do you think this is worth? Probably not a lot so we're just going to put a small number for you."},{selector:".attestation-step-set-price",content:"Come on now..."},{selector:".attestation-step-do-publish",content:"Now press it to mint your first NFT. Image data will be stored on-chain unencrypted."}],F=Object(u.connect)((function(e){return{bags:e.reducer.bags,bagsData:e.reducer.bagsData,state:e,platform:Object(S.g)(e),user:e.reducer.user}}),(function(e){return{loadBag:function(t,a,n){e({type:"LOAD_BAG_DATA",payload:{registryUri:t,bagId:a,state:n}})},reupload:function(t,a){e({type:"REUPLOAD_BAG_DATA",payload:{bagId:a,registryUri:t}})},publish:function(t,a,n,c){e({type:"PUBLISH_BAG_DATA",payload:{bagId:a,registryUri:t,price:n,fees:c}})}}}))((function(e){var t=Object(b.useHistory)(),a=l.a.useRef(null),n=Object(i.useState)(),u=Object(o.a)(n,2),p=u[0],f=u[1],g=Object(i.useState)(!1),m=Object(o.a)(g,2),v=m[0],O=m[1],h=Object(i.useState)(!1),x=Object(o.a)(h,2),y=x[0],S=x[1],F=new Map([]);j.a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(j.a.version,"/pdf.worker.js");var B=Object(k.b)(),U=B.currentStep,P=B.setIsOpen,E=B.setCurrentStep,D=B.setSteps;Object(i.useEffect)((function(){setTimeout((function(){if("publisher"===e.user)if(localStorage.getItem("tour")){var t=parseInt(localStorage.getItem("tour")||"0");0===t&&setTimeout((function(){console.info("setSteps(publisherSteps);"),P(!1),D(T),E(0),P(!0)}),100),2===t&&setTimeout((function(){console.info("setSteps(publishSteps);"),P(!1),D(A),E(0),P(!0),a&&a.current&&(console.info("SET PRICE"),f(20),a.current.setFocus(),setTimeout((function(){E(2),console.info("currentStep: "),console.info(U)}),5e3))}),100)}else D(T),P(!0),console.info("setSteps(publishSteps);");"attestor"===e.user&&(D(C),P(!0))}),100),P(!1),e.loadBag(e.registryUri,e.bagId,e.state)}),[]);var R=Object(w.a)(e.registryUri,e.bagId);console.log(e.bagsData[R]);var M=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){Promise.all(Object.keys(L.signatures).reduce((function(e,t){return[I(L,t)].concat(Object(r.a)(e))}),[])).then((function(t){e(t.reduce((function(e,t){return!1!==t&&e}),!1))}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=e.bagsData[R],G=void 0;return L&&L.signatures&&(L.signatures[0]&&(G="0"),L.signatures[1]&&(G="1")),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(d.j,{className:"modal-document","data-v-0529b926":"",children:["undefined"===typeof document?Object(N.jsx)(d.w,{isOpen:!0,"data-v-0529b926":""}):void 0,null===document?Object(N.jsx)("span",{className:"no-document","data-v-0529b926":"",children:"No document attached"}):void 0,Object(N.jsx)(d.c,{className:"ButtonArray","data-v-0529b926":"",children:Object(N.jsx)(d.b,{color:"primary",onClick:function(){t.replace("/doc",{direction:"back"})},"data-v-0529b926":"",children:"Close"})}),Object(N.jsxs)("div",{className:"FloatingBottomLeft","data-v-0529b926":"",children:[Object(N.jsx)("div",{className:"Files","data-v-0529b926":"",children:Object.keys(L.files).map((function(e){var t=L.files[e];return Object(N.jsx)("div",{"data-v-0529b926":"",children:["image/png","image/jpg","image/jpeg"].includes(t.mimeType)?Object(N.jsx)("div",{className:"ImageFrame ".concat(L.mainFile===e?"main":""),"data-v-0529b926":"",children:Object(N.jsx)("img",{className:"Image",alt:t.name,src:"data:".concat(t.mimeType,";base64, ").concat(t.data),"data-v-0529b926":""})}):Object(N.jsx)(l.a.Fragment,{})},e)}))}),Object.keys(L.signatures).map((function(e){return Object(N.jsx)(d.h,{className:"signature-line","data-v-0529b926":"",children:I(L,e)?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:"signature-ok","data-v-0529b926":"",children:"\u2713"}),"signature n\xb0".concat(e," verified (").concat(L.signatures[e].publicKey.slice(0,12),"\u2026)")]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{"data-v-0529b926":"",children:"\u2717"}),"signature n\xb0".concat(e," invalid (").concat(L.signatures[e].publicKey.slice(0,12),"\u2026)")]})},e)})),M()&&"publisher"===e.user?Object(N.jsxs)("div",{"data-v-0529b926":"",children:[Object(N.jsxs)(d.r,{"data-v-0529b926":"",children:[Object(N.jsx)(d.v,{position:"floating",color:"primary","data-v-0529b926":"",children:"Enter price"}),Object(N.jsx)(d.q,{ref:a,class:"attestation-step-set-price",color:"primary",placeholder:"enter price(in rev) of nft",type:"number",value:p,onKeyPress:function(e){"Enter"===e.key&&p&&p>0&&E(U+1)},onIonChange:function(e){var t=parseInt(e.target.value);f(t)},"data-v-0529b926":""})]}),Object(N.jsx)(d.b,{disabled:y,className:"attestation-step-do-publish SignatureRequiredBtn",size:"default",onClick:function(){P(!1),S(!0),e.publish(e.registryUri,e.bagId,p||0,Object(r.a)(F.values()))},"data-v-0529b926":"",children:"Publish to Marketplace"})]}):Object(N.jsx)(l.a.Fragment,{}),[void 0,"0"].includes(G)&&Object(N.jsx)(d.b,{disabled:v,className:"SignatureRequiredBtn",size:"default",onClick:function(){P(!1),O(!0),e.reupload(e.registryUri,e.bagId)},"data-v-0529b926":"",children:"Attest and Sign"})]})]})})}));t.a=F},719:function(e,t){},720:function(e,t){},721:function(e,t){},722:function(e,t){},723:function(e,t){},731:function(e,t,a){},732:function(e,t,a){},745:function(e,t,a){"use strict";a.r(t),a.d(t,"PublicStore",(function(){return x}));var n=a(28),c=a(57),r=a(3),s=a.n(r),o=a(42),i=a(16),l=a(40),d=a(24),u=a(21),b=(a(731),a(713)),j=a(122),p=a(14),f=Object(c.connect)((function(e){return{user:e.reducer.user,publicKey:Object(d.i)(e)}}),(function(e){return{purchase:function(t,a,n,c){e({type:"PURCHASE_BAG",payload:{bagId:a,registryUri:t,price:n,step:c}})},sell:function(t,a,n){e({type:"SELL_BAG",payload:{bagId:a,registryUri:t,price:n}})}}}))((function(e){var t=localStorage.getItem("wallet"),a=Object(j.b)(),n=a.currentStep,c=a.setIsOpen,o=a.setCurrentStep,d=s.a.useRef(null),f=Object(r.useState)(!1),g=Object(u.a)(f,2),m=g[0],v=g[1],O=Object(r.useState)(!1),h=Object(u.a)(O,2),x=h[0],y=h[1],I=Object(r.useState)(),S=Object(u.a)(I,2),w=S[0],k=S[1];return console.log(e.folder),Object(p.jsxs)(i.u,{className:"container",disabled:!0,"data-v-604ab7ea":"",children:[Object(p.jsxs)(i.t,{side:"end","data-v-604ab7ea":"",children:[Object(p.jsx)(i.s,{color:"secondary",onClick:function(){return console.log("favorite clicked")},"data-v-604ab7ea":"",children:Object(p.jsx)(i.o,{icon:l.k,size:"large","data-v-604ab7ea":""})}),Object(p.jsx)(i.s,{color:"danger",onClick:function(){return console.log("share clicked")},"data-v-604ab7ea":"",children:Object(p.jsx)(i.o,{icon:l.u,size:"large","data-v-604ab7ea":""})})]}),Object(p.jsxs)(i.d,{class:"MarketItemCard MarketCard",className:"".concat(!e.onlyCompleted&&Object.keys(e.folder.signatures).length>1?"with-parent":""," ").concat(e.completed?"success":"secondary"),"data-v-604ab7ea":"",children:[Object(p.jsxs)(i.e,{"data-v-604ab7ea":"",children:[Object(p.jsx)(i.f,{"data-v-604ab7ea":"",children:Object(p.jsx)(i.v,{className:"ion-text-wrap","data-v-604ab7ea":"",children:Object(p.jsx)("h1",{"data-v-604ab7ea":"",children:Object(b.a)(e.id)})})}),Object(p.jsx)(i.g,{className:"MarketItemInfo","data-v-604ab7ea":"",children:!e.awaitsSignature&&Object(p.jsxs)(i.m,{"data-v-604ab7ea":"",children:[Object(p.jsx)(i.E,{"data-v-604ab7ea":"",children:Object(p.jsx)(i.v,{"data-v-604ab7ea":"",children:Object(p.jsxs)("h2",{"data-v-604ab7ea":"",children:["Owner: ",e.bag.boxId]})})}),Object(p.jsxs)(i.E,{"data-v-604ab7ea":"",children:[Object(p.jsx)(i.o,{icon:l.c,color:"success","data-v-604ab7ea":""}),Object(p.jsx)(i.v,{className:"ion-text-wrap","data-v-604ab7ea":"",children:Object(p.jsx)("h3",{"data-v-604ab7ea":"",children:"Attested"})})]})]})})]}),Object(p.jsxs)("div",{className:"mainContainer","data-v-604ab7ea":"",children:[Object(p.jsx)("div",{className:"IconContainer","data-v-604ab7ea":"",children:Object.keys(e.folder.files).map((function(t){var a=e.folder.files[t];return["image/png","image/jpg","image/jpeg"].includes(a.mimeType)?Object(p.jsx)("div",{className:"ImageFrame ".concat(e.folder.mainFile===t?"main":"secondary"),"data-v-604ab7ea":"",children:Object(p.jsx)("img",{className:"Image",alt:a.name,src:"data:".concat(a.mimeType,";base64, ").concat(a.data),"data-v-604ab7ea":""})},t):Object(p.jsx)(s.a.Fragment,{})}))}),Object(p.jsxs)("div",{className:"labelContainer","data-v-604ab7ea":"",children:[t?void 0:Object(p.jsxs)(i.b,{disabled:m,className:"PurchaseButton",onClick:function(){c(!1),v(!0),e.purchase(e.registryUri,Object(b.a)(e.id),e.bag.price||0,"buyer"===e.user?"4":"6")},"data-v-604ab7ea":"",children:["Buy for ",1e-8*(e.bag.price||0)," REV"]}),t?Object(p.jsxs)("div",{"data-v-604ab7ea":"",children:[Object(p.jsx)(i.v,{position:"floating",color:"primary","data-v-604ab7ea":"",children:"Enter price"}),Object(p.jsx)(i.q,{ref:d,color:"primary",placeholder:"enter price(in rev) of nft",type:"number",value:w||30,onKeyPress:function(e){"Enter"===e.key&&w&&w>0&&o(n+1)},onIonChange:function(e){console.info(parseInt(e.target.value));var t=parseInt(e.target.value);k(t)},"data-v-604ab7ea":""}),Object(p.jsxs)(i.b,{disabled:x,className:"SellButton",onClick:function(){y(!0),c(!1),e.sell(e.registryUri,Object(b.a)(e.id),w||3e9)},"data-v-604ab7ea":"",children:["Sell for ",1e-8*(w||3e9)," REV"]})]}):void 0]})]})]})]})})),g=a(714),m=a(718),v=(a(153),a(732),[{selector:".MarketCard",content:"The NFT is now for sale."},{selector:".PurchaseButton",content:'Press the "Buy" button to purchase this NFT.'}]),O=[{selector:".MarketCard",content:"Congratulations! You now own this NFT!"},{selector:".SellButton",content:"You can put this item back to the store and resell it for a higher price."}],h=[{selector:".MarketCard",content:"Congratulations! You now own this NFT! This concludes our demo."}],x=Object(c.connect)((function(e){return{connected:Object(d.c)(e),bags:Object(d.a)(e),bagsData:Object(d.b)(e),documentsCompleted:Object(d.f)(e),documentsAwaitingSignature:Object(d.e)(e),documentsAddressesInOrder:Object(d.d)(e),isLoading:e.reducer.isLoading,searchText:e.reducer.searchText,platform:e.reducer.platform,user:e.reducer.user}}),(function(e){return{}}))((function(e){var t=localStorage.getItem("wallet"),a=(Object(o.useHistory)(),Object(j.b)()),c=a.setIsOpen,s=a.setCurrentStep,l=a.setSteps;Object(r.useEffect)((function(){if("buyer"===e.user&&localStorage.getItem("tour")){var t=parseInt(localStorage.getItem("tour")||"0");l(t<4?v:O)}"buyer2"===e.user&&(localStorage.getItem("tour")&&(parseInt(localStorage.getItem("tour")||"0")<6?l(v):(l(h),localStorage.removeItem("demo"),localStorage.setItem("tour","0"))));setTimeout((function(){c(!1),s(0),c(!0),setTimeout((function(){s(1)}),6e3)}),100)}),[]);return"show"===e.action?Object(p.jsx)(i.j,{"data-v-3c0795ef":"",children:Object(p.jsx)(m.a,{registryUri:e.registryUri,bagId:e.bagId,"data-v-3c0795ef":""})}):Object(p.jsxs)("div",{className:"public-store","data-v-3c0795ef":"",children:[t?Object(p.jsx)("div",{className:"title","data-v-3c0795ef":"",children:Object(p.jsx)("h2",{"data-v-3c0795ef":"",children:"My NFTs"})}):Object(p.jsx)("div",{className:"title","data-v-3c0795ef":"",children:Object(p.jsx)("h2",{"data-v-3c0795ef":"",children:"NFT Marketplace"})}),Object(p.jsxs)(i.j,{className:"container","data-v-3c0795ef":"",children:[(e.platform,void 0),"list"===e.action?Object(p.jsx)(p.Fragment,{children:e.isLoading?Object(n.a)(Array(10)).map((function(e,t){return Object(p.jsx)(g.a,{id:t.toString(),"data-v-3c0795ef":""},t)})):e.documentsAddressesInOrder.map((function(t){return Object(p.jsx)("div",{className:"container","data-v-3c0795ef":"",children:Object(p.jsx)(f,{registryUri:e.registryUri,id:t,bag:e.bags[t],folder:e.bagsData[t],onlyCompleted:!1,awaitsSignature:!!e.documentsAwaitingSignature[t],completed:!!e.documentsCompleted[t],"data-v-3c0795ef":""},t)})}))}):void 0]})]})}));t.default=x}}]);
//# sourceMappingURL=6.c400a4c9.chunk.js.map