(this.webpackJsonppoc=this.webpackJsonppoc||[]).push([[5],{713:function(e,t,a){"use strict";a.d(t,"a",(function(){return n}));var n=function(e){return e.split("/").slice(1).join("")}},714:function(e,t,a){"use strict";a(3);var n=a(16),s=(a(715),a(40)),r=a(14);t.a=function(e){e.id;return Object(r.jsxs)(n.r,{detail:!1,"data-v-c9595389":"",children:[Object(r.jsx)("div",{className:"IconContainer","data-v-c9595389":"",children:Object(r.jsx)(n.o,{icon:s.l,size:"large",color:"secondary","data-v-c9595389":""})}),Object(r.jsxs)(n.v,{className:"ion-text-wrap","data-v-c9595389":"",children:[Object(r.jsx)("h4",{"data-v-c9595389":"",children:Object(r.jsx)(n.G,{animated:!0,style:{width:"80%"},"data-v-c9595389":""})}),Object(r.jsx)("h4",{"data-v-c9595389":"",children:Object(r.jsx)(n.G,{animated:!0,style:{width:"60%"},"data-v-c9595389":""})})]})]})}},715:function(e,t,a){},716:function(e,t){},717:function(e,t,a){},718:function(e,t,a){"use strict";var n=a(1),s=a.n(n),r=a(28),c=a(5),o=a(21),i=a(3),l=a.n(i),d=a(16),u=a(57),p=a(42),b=a(724),j=a(15),f=a(43),v=a.n(f),m=a(45),h=a(44),O=a(56),g=a(95),x=a(328),y=function(){var e=Object(c.a)(s.a.mark((function e(t,a){var n,r,c,i,l,d,u,p,b,f;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=h.DID,e.t1=j.a,e.t2=j.a,e.t3={},e.next=6,m.a;case 6:return e.t4=e.sent,e.t5=(0,e.t2)(e.t3,e.t4),e.t6=v.a.getResolver(),e.t7=(0,e.t1)(e.t5,e.t6),e.t8={resolver:e.t7},n=new e.t0(e.t8),r=t.signatures[a],c=Object(O.base64urlToJSON)(r.protected).kid,e.next=16,n.resolve(c);case 16:return i=e.sent,l=Object.assign({},t),d=Object.fromEntries(Object.entries(l.signatures).filter((function(e){var t=Object(o.a)(e,2),n=t[0];t[1];return parseInt(n)<parseInt(a)}))),l.signatures=d,e.next=22,Object(x.encodePayload)(l);case 22:if(u=e.sent,p=u.cid,b=Object(O.encodeBase64Url)(p.bytes),e.prev=25,(f=Object(g.verifyJWS)(r.protected+"."+b+"."+r.signature,i.publicKey)).id!==c||!l.scheme||l.scheme[a]!==f.id){e.next=30;break}return console.info(a+" Signature valid"),e.abrupt("return",!0);case 30:e.next=36;break;case 32:return e.prev=32,e.t9=e.catch(25),console.info(a+" Signature not valid. "+e.t9),e.abrupt("return",!1);case 36:return e.abrupt("return",!1);case 37:case"end":return e.stop()}}),e,null,[[25,32]])})));return function(t,a){return e.apply(this,arguments)}}(),S=y,k=a(24),w=(a(717),a(94)),I=a(122),N=a(14),C=[{selector:".SignatureRequiredBtn",content:"If the photo looks legit you can now attest it and put your signature."}],F=[{selector:".attestation-step-file",content:"Pick a photo you wish to upload. Image data will be stored on-chain in an encrypted form."},{selector:".attestation-step-name",content:"Choose a name for your new NFT."},{selector:".attestation-step-upload",content:"Now press upload to begin the attestation process."},{selector:".attestation-step-set-price",content:"How much do you think this is worth? Probably not a lot so we're just going to put a small number for you."}],T=[{selector:".attestation-step-set-price",content:"How much do you think this is worth? Probably not a lot so we're just going to put a small number for you."},{selector:".attestation-step-set-price",content:"Come on now..."},{selector:".attestation-step-do-publish",content:"Now press it to mint your first NFT. Image data will be stored on-chain unencrypted."}],A=Object(u.connect)((function(e){return{bags:e.reducer.bags,bagsData:e.reducer.bagsData,state:e,platform:Object(k.g)(e),user:e.reducer.user}}),(function(e){return{loadBag:function(t,a,n){e({type:"LOAD_BAG_DATA",payload:{registryUri:t,bagId:a,state:n}})},reupload:function(t,a){e({type:"REUPLOAD_BAG_DATA",payload:{bagId:a,registryUri:t}})},publish:function(t,a,n,s){e({type:"PUBLISH_BAG_DATA",payload:{bagId:a,registryUri:t,price:n,fees:s}})}}}))((function(e){var t=Object(p.useHistory)(),a=l.a.useRef(null),n=Object(i.useState)(),u=Object(o.a)(n,2),j=u[0],f=u[1],v=Object(i.useState)(!1),m=Object(o.a)(v,2),h=m[0],O=m[1],g=Object(i.useState)(!1),x=Object(o.a)(g,2),y=x[0],k=x[1],A=new Map([]);b.a.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/".concat(b.a.version,"/pdf.worker.js");var E=Object(I.b)(),D=E.currentStep,U=E.setIsOpen,P=E.setCurrentStep,R=E.setSteps;Object(i.useEffect)((function(){setTimeout((function(){if("publisher"===e.user)if(localStorage.getItem("tour")){var t=parseInt(localStorage.getItem("tour")||"0");0===t&&setTimeout((function(){console.info("setSteps(publisherSteps);"),U(!1),R(F),P(0),U(!0)}),100),2===t&&setTimeout((function(){console.info("setSteps(publishSteps);"),U(!1),R(T),P(0),U(!0),a&&a.current&&(console.info("SET PRICE"),f(20),a.current.setFocus(),setTimeout((function(){P(2),console.info("currentStep: "),console.info(D)}),5e3))}),100)}else R(F),U(!0),console.info("setSteps(publishSteps);");"attestor"===e.user&&(R(C),U(!0))}),100),U(!1),e.loadBag(e.registryUri,e.bagId,e.state)}),[]);var B=Object(w.a)(e.registryUri,e.bagId);console.log(e.bagsData[B]);var _=function(){var e=Object(c.a)(s.a.mark((function e(){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){Promise.all(Object.keys(L.signatures).reduce((function(e,t){return[S(L,t)].concat(Object(r.a)(e))}),[])).then((function(t){e(t.reduce((function(e,t){return!1!==t&&e}),!1))}))})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=e.bagsData[B],z=void 0;return L&&L.signatures&&(L.signatures[0]&&(z="0"),L.signatures[1]&&(z="1")),Object(N.jsx)(N.Fragment,{children:Object(N.jsxs)(d.j,{className:"modal-document","data-v-0529b926":"",children:["undefined"===typeof document?Object(N.jsx)(d.w,{isOpen:!0,"data-v-0529b926":""}):void 0,null===document?Object(N.jsx)("span",{className:"no-document","data-v-0529b926":"",children:"No document attached"}):void 0,Object(N.jsx)(d.c,{className:"ButtonArray","data-v-0529b926":"",children:Object(N.jsx)(d.b,{color:"primary",onClick:function(){t.replace("/doc",{direction:"back"})},"data-v-0529b926":"",children:"Close"})}),Object(N.jsxs)("div",{className:"FloatingBottomLeft","data-v-0529b926":"",children:[Object(N.jsx)("div",{className:"Files","data-v-0529b926":"",children:Object.keys(L.files).map((function(e){var t=L.files[e];return Object(N.jsx)("div",{"data-v-0529b926":"",children:["image/png","image/jpg","image/jpeg"].includes(t.mimeType)?Object(N.jsx)("div",{className:"ImageFrame ".concat(L.mainFile===e?"main":""),"data-v-0529b926":"",children:Object(N.jsx)("img",{className:"Image",alt:t.name,src:"data:".concat(t.mimeType,";base64, ").concat(t.data),"data-v-0529b926":""})}):Object(N.jsx)(l.a.Fragment,{})},e)}))}),Object.keys(L.signatures).map((function(e){return Object(N.jsx)(d.h,{className:"signature-line","data-v-0529b926":"",children:S(L,e)?Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{className:"signature-ok","data-v-0529b926":"",children:"\u2713"}),"signature n\xb0".concat(e," verified (").concat(L.signatures[e].publicKey.slice(0,12),"\u2026)")]}):Object(N.jsxs)(N.Fragment,{children:[Object(N.jsx)("span",{"data-v-0529b926":"",children:"\u2717"}),"signature n\xb0".concat(e," invalid (").concat(L.signatures[e].publicKey.slice(0,12),"\u2026)")]})},e)})),_()&&"publisher"===e.user?Object(N.jsxs)("div",{"data-v-0529b926":"",children:[Object(N.jsxs)(d.r,{"data-v-0529b926":"",children:[Object(N.jsx)(d.v,{position:"floating",color:"primary","data-v-0529b926":"",children:"Enter price"}),Object(N.jsx)(d.q,{ref:a,class:"attestation-step-set-price",color:"primary",placeholder:"enter price(in rev) of nft",type:"number",value:j,onKeyPress:function(e){"Enter"===e.key&&j&&j>0&&P(D+1)},onIonChange:function(e){var t=parseInt(e.target.value);f(t)},"data-v-0529b926":""})]}),Object(N.jsx)(d.b,{disabled:y,className:"attestation-step-do-publish SignatureRequiredBtn",size:"default",onClick:function(){U(!1),k(!0),e.publish(e.registryUri,e.bagId,j||0,Object(r.a)(A.values()))},"data-v-0529b926":"",children:"Publish to Marketplace"})]}):Object(N.jsx)(l.a.Fragment,{}),[void 0,"0"].includes(z)&&Object(N.jsx)(d.b,{disabled:h,className:"SignatureRequiredBtn",size:"default",onClick:function(){U(!1),O(!0),e.reupload(e.registryUri,e.bagId)},"data-v-0529b926":"",children:"Attest and Sign"})]})]})})}));t.a=A},719:function(e,t){},720:function(e,t){},721:function(e,t){},722:function(e,t){},723:function(e,t){},726:function(e,t,a){},727:function(e,t,a){},729:function(e,t,a){"use strict";(function(e){var n,s=a(1),r=a.n(s),c=a(2),o=a(5),i=a(6),l=a(7),d=a(4),u=a(8),p=a(9),b=a(15),j=a(3),f=a.n(j),v=a(57),m=a(16),h=a(40),O=a(42),g=a(24),x=(a(730),a(733)),y=a(122),S=a(14),k={signatures:{},date:(new Date).toUTCString(),files:{},mainFile:""},w=[{selector:".attestation-step-file",content:"Pick a photo you wish to upload."},{selector:".attestation-step-name",content:"Choose a name for your new NFT."},{selector:".attestation-step-main-file",content:"Set your photo as your main file."},{selector:".attestation-step-select-attestor",content:"Click here and appoint an attestor."},{selector:".attestation-step-upload",content:"Now press upload to begin the attestation process."}],I=function(t){Object(u.a)(n,t);var a=Object(p.a)(n);function n(t){var s;return Object(i.a)(this,n),(s=a.call(this,t)).dropEl=void 0,s.blobToBase64=function(e){return new Promise((function(t,a){var n=new FileReader;n.onerror=a,n.onload=function(){t(n.result)},n.readAsDataURL(e)}))},s.nativeFilePicker=Object(o.a)(r.a.mark((function t(){var a,n,o,i,l,u,p;return r.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(d.a)(s),t.next=3,x.a.select({multiple:!1,extensions:[".jpg",".png",".jpeg"]});case 3:return n=t.sent,o=n.files[0],t.next=7,fetch(o.path);case 7:return i=t.sent,t.next=10,i.blob();case 10:return l=t.sent,t.next=13,s.blobToBase64(l);case 13:u=t.sent,(p={signatures:{},date:(new Date).toUTCString(),files:Object(c.a)({},o.name,{name:o.name,mimeType:l.type,data:e.from(u.split(",")[1]).toString("base64")}),mainFile:""}).mainFile=p.mainFile||Object.keys(p.files)[0],a.setState({folder:Object(b.a)({},p)});case 17:case"end":return t.stop()}}),t)}))),s.saveRef=function(e){s.dropEl=e,s.dropEl&&(s.dropEl.addEventListener("dragenter",(function(e){e.stopPropagation(),e.preventDefault()})),s.dropEl.addEventListener("dragover",(function(e){e.stopPropagation(),e.preventDefault()})),s.dropEl.addEventListener("drop",(function(e){return e.preventDefault(),e.stopPropagation(),s.onDrop(e),!1})))},s.onDrop=function(e){console.info("DROP");var t=Object(d.a)(s);e.preventDefault();var a=e.dataTransfer.files;a[0]?(s.setState({dropErrors:[]}),Array.from(a).forEach((function(e){s.handleFile(e)})),console.info("Done handling files"),setTimeout((function(){var e;(console.info("After handling files timeout"),s.props.setCurrentStep(s.props.currentStep+1),s.state.nameInput.current)&&(null===(e=s.state.nameInput.current)||void 0===e||e.setFocus(),s.setState({bagId:"Unseen Photo"}),setTimeout((function(){s.props.setCurrentStep(s.props.currentStep+1)}),5e3))}),100),t.setState({folder:Object(b.a)(Object(b.a)({},k),{},{mainFile:k.mainFile||Object.keys(a)[0]})}),s.setState({mainFile:k.mainFile})):s.setState({dropErrors:["Please drop a file"]})},s.handleFile=function(e){var t=Object(d.a)(s),a=new FileReader;if(e.type.match("image.*")){try{a.onloadend=function(){var n=Object(o.a)(r.a.mark((function n(s){return r.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s&&s.target&&"string"===typeof a.result){n.next=2;break}return n.abrupt("return");case 2:t.setState({files:Object(b.a)(Object(b.a)({},t.state.files),{},Object(c.a)({},e.name,{name:e.name,mimeType:e.type,data:a.result.split(",")[1]}))});case 3:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()}catch(n){s.setState({dropErrors:["Error parsing file"]})}a.readAsDataURL(e)}},s.onFileChange=function(e){if(e.target.files){var t,a=null===(t=e.target)||void 0===t?void 0:t.files;Array.from(a).forEach((function(e){s.handleFile(e)})),setTimeout((function(){var e;(s.props.setCurrentStep(s.props.currentStep+1),s.state.nameInput.current)&&(null===(e=s.state.nameInput.current)||void 0===e||e.setFocus(),s.setState({bagId:"Unseen Photo"}),setTimeout((function(){s.props.setCurrentStep(s.props.currentStep+1)}),5e3))}),100),s.setState({folder:Object(b.a)(Object(b.a)({},k),{},{mainFile:k.mainFile||Object.keys(a)[0]})}),s.setState({mainFile:k.mainFile})}},s.state={folder:void 0,recipient:"",mainFile:"",description:"",mainFileResolution:"",bagId:"",dropErrors:[],platform:t.platform,files:{},attestorSelect:f.a.createRef(),nameInput:f.a.createRef(),isUploading:!1},s}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){e.props.setSteps(w),console.info("NEXT STEP"),e.props.setCurrentStep(e.props.currentStep+1)}),100);var t=this.state.attestorSelect.current;t.items=[{id:1,name:"Attestor"},{id:2,name:"Charity"}],t.addEventListener("changed",(function(e){console.log(e)}))}},{key:"render",value:function(){var e,t,a=this;return Object(S.jsxs)(m.j,{class:"modal-document","data-v-1a37984d":"",children:[Object(S.jsx)(m.K,{class:"upload-to-the-blockchain","data-v-1a37984d":"",children:"Create new item"}),Object(S.jsx)(m.c,{className:"ButtonArray","data-v-1a37984d":"",children:Object(S.jsx)(m.b,{className:"close",color:"primary",onClick:function(){a.props.history.replace("/doc",{direction:"back"})},"data-v-1a37984d":"",children:"x"})}),Object(S.jsxs)(m.j,{className:"inner","data-v-1a37984d":"",children:[Object(S.jsxs)(m.r,{"data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"label",position:"floating","data-v-1a37984d":"",children:"Enter name of item*"}),Object(S.jsx)(m.q,{className:"attestation-step-name label",ref:this.state.nameInput,id:"nameInput",placeholder:"Item Name",type:"text",value:this.state.bagId,maxlength:22,onIonChange:function(e){return a.setState({bagId:e.target.value})},"data-v-1a37984d":""})]}),Object(S.jsxs)(m.r,{"data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"label",position:"floating","data-v-1a37984d":"",children:"Give a brief story about your item"}),Object(S.jsx)(m.J,{className:"description",placeholder:"Provide a brief description",value:this.state.description,onIonChange:function(e){return a.setState({description:e.detail.value})},"data-v-1a37984d":""})]}),Object(S.jsxs)(m.r,{className:"attestation-step-select-attestor","data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"custom-radio","data-v-1a37984d":"",children:"Select Attestor:"}),Object(S.jsx)(m.z,{value:this.state.recipient,onIonChange:function(e){setTimeout((function(){a.props.setCurrentStep(a.props.currentStep+1)}),100),a.setState({recipient:e.detail.value})},"data-v-1a37984d":"",children:Object(S.jsxs)(m.r,{ref:this.state.attestorSelect,"data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"custom-radio","data-v-1a37984d":"",children:"Attestor"}),Object(S.jsx)(m.y,{slot:"start",value:"attestor","data-v-1a37984d":""})]})})]}),"web"===this.props.platform?Object(S.jsxs)("div",{className:"attestation-step-file","data-v-1a37984d":"",children:[Object(S.jsxs)("div",{className:"drop-area ".concat((this.state.folder,"")),"data-v-1a37984d":"",children:[Object(S.jsx)("textarea",{ref:this.saveRef,"data-v-1a37984d":""}),Object(S.jsxs)("span",{className:"img-upload","data-v-1a37984d":"",children:[Object(S.jsx)(m.o,{icon:h.l,size:"large","data-v-1a37984d":""}),Object(S.jsx)("p",{"data-v-1a37984d":"",children:"Drag and Drop your files"})]})]}),Object(S.jsx)("input",{className:"FileSelectButton",accept:"image/png,image/jpg,image/jpeg",title:"Browse",type:"file",onChange:this.onFileChange,"data-v-1a37984d":""})]}):void 0,"ios"===this.props.platform||"android"===this.props.platform?Object(S.jsx)(m.b,{onClick:function(){a.nativeFilePicker()},"data-v-1a37984d":"",children:"Pick a document"}):void 0,Object.keys((null===(e=this.state)||void 0===e?void 0:e.files)||{}).forEach((function(e){if(a.state.files[e])return Object(S.jsxs)(m.u,{className:"container","data-v-1a37984d":"",children:[Object(S.jsx)(m.t,{side:"end","data-v-1a37984d":"",children:Object(S.jsx)(m.s,{color:"danger",onClick:function(){var t;a.setState({files:Object.keys(null===(t=a.state)||void 0===t?void 0:t.files).filter((function(t){return t!==e})).reduce((function(e,t){var n;return e[t]=null===(n=a.state)||void 0===n?void 0:n.files[t],e}),{})})},"data-v-1a37984d":"",children:Object(S.jsx)(m.o,{icon:h.u,size:"large","data-v-1a37984d":""})})}),Object(S.jsxs)(m.r,{detail:!1,button:!0,onClick:function(){console.info("click on item")},"data-v-1a37984d":"",children:[Object(S.jsx)("div",{className:"IconContainer","data-v-1a37984d":"",children:Object(S.jsx)(m.o,{icon:h.l,size:"large",color:"primary","data-v-1a37984d":""})}),Object(S.jsx)(m.v,{className:"ion-text-wrap",color:"primary","data-v-1a37984d":"",children:Object(S.jsx)("h2",{"data-v-1a37984d":"",children:e})})]})]},e)})),Object(S.jsxs)(m.r,{"data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"label","data-v-1a37984d":"",children:"Main file:"}),Object.keys((null===(t=this.state)||void 0===t?void 0:t.files)||{}).map((function(e){return Object(S.jsx)(m.z,{value:a.state.mainFile,onIonChange:function(e){setTimeout((function(){a.props.setCurrentStep(a.props.currentStep+1)}),100),a.setState({mainFile:e.detail.value})},"data-v-1a37984d":"",children:Object(S.jsxs)(m.r,{className:"attestation-step-main-file","data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"custom-radio","data-v-1a37984d":"",children:e}),Object(S.jsx)(m.y,{slot:"start",value:e,"data-v-1a37984d":""})]})},e)}))]}),Object(S.jsxs)(m.r,{"data-v-1a37984d":"",children:[Object(S.jsx)(m.v,{className:"label",position:"floating","data-v-1a37984d":"",children:"Enter Resolution of main NFT item"}),Object(S.jsx)(m.q,{className:"label",placeholder:"1920 x 1080",type:"text",value:this.state.mainFileResolution,onIonChange:function(e){return a.setState({mainFileResolution:e.target.value})},"data-v-1a37984d":""})]}),this.state.folder?Object(S.jsxs)(m.r,{"data-v-1a37984d":"",children:[Object(S.jsx)(m.b,{className:"attestation-step-upload AddButton",disabled:this.state.isUploading||!this.state.folder||!this.state.bagId,onClick:function(){a.props.setIsOpen(!1),a.setState(Object(b.a)(Object(b.a)({},a.state),{},{isUploading:!0})),a.props.upload(a.state.bagId,a.state.folder,a.state.recipient,a.state.files,a.state.mainFileResolution,a.state.description)},"data-v-1a37984d":"",children:"Upload"}),Object(S.jsx)(m.b,{disabled:this.state.isUploading,className:"AddButton",onClick:function(){a.setState({folder:void 0})},"data-v-1a37984d":"",children:"Cancel"})]}):void 0]})]})}}]),n}(f.a.Component),N=Object(v.connect)((function(e){return{state:e,bags:Object(g.a)(e),bagsData:Object(g.b)(e),publicKey:Object(g.i)(e),platform:Object(g.g)(e)}}),(function(e){return{upload:function(t,a,n,s,r,c){e({type:"UPLOAD",payload:{bagId:t,folder:Object(b.a)(Object(b.a)({},a),{},{files:s}),recipient:n,mainFileResolution:r,description:c}})}}}))(I);t.a=Object(y.c)((n=N,function(e){var t=Object(O.useHistory)();return Object(S.jsx)(n,Object(b.a)(Object(b.a)({history:t},e),{},{"data-v-1a37984d":""}))}))}).call(this,a(20).Buffer)},730:function(e,t,a){},733:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(123),s=Object(n.b)("FileSelect",{web:function(){return a.e(17).then(a.bind(null,743)).then((function(e){return new e.FileSelectWeb}))}})},744:function(e,t,a){"use strict";a.r(t),a.d(t,"DockListView",(function(){return x}));var n=a(28),s=a(57),r=a(3),c=a.n(r),o=a(42),i=a(16),l=a(40),d=a(24),u=(a(726),a(14)),p=Object(s.connect)((function(e){return{registryUri:e.reducer.registryUri,publicKey:e.reducer.publicKey,searchText:e.reducer.searchText,user:e.reducer.user}}),(function(e){return{refresh:function(t){e({type:"REFRESH",payload:t})},setSearchText:function(t){e({type:"SET_SEARCH_TEXT",payload:t})}}}))((function(e){var t=Object(o.useHistory)();return Object(u.jsxs)(c.a.Fragment,{children:[Object(u.jsx)(i.A,{slot:"fixed",onIonRefresh:function(t){e.refresh({registryUri:e.registryUri,publicKey:e.publicKey}),t.detail.complete()},"data-v-e1c37d45":"",children:Object(u.jsx)(i.B,{"data-v-e1c37d45":""})}),Object(u.jsx)("div",{className:"container","data-v-e1c37d45":"",children:Object(u.jsxs)(i.r,{detail:!1,"no-padding":!0,lines:"none",className:"SearchBarContainer","data-v-e1c37d45":"",children:["publisher"===e.user?Object(u.jsx)(i.b,{className:"attestation-step-upload-button AddButton with-border","icon-only":!0,slot:"start",color:"none",size:"default",onClick:function(){t.push("/doc/upload/")},"data-v-e1c37d45":"",children:Object(u.jsx)("span",{"data-v-e1c37d45":"",children:"upload"})}):Object(u.jsx)(c.a.Fragment,{})," "," ",Object(u.jsx)(i.F,{color:"none",value:e.searchText,onIonChange:function(t){return e.setSearchText(t.detail.value)},"data-v-e1c37d45":""})]})})]})})),b=(a(727),a(713)),j=Object(s.connect)(void 0,void 0)((function(e){var t=e.onlyCompleted,a=e.id,n=e.awaitsSignature,s=e.completed,r=e.folder,c=(e.bag,e.pos),d=Object(o.useHistory)(),p=localStorage.getItem("publisher");return console.log(n),Object(u.jsxs)(i.u,{className:"container",disabled:!0,"data-v-54995c49":"",children:[Object(u.jsxs)(i.t,{side:"end","data-v-54995c49":"",children:[Object(u.jsx)(i.s,{color:"secondary",onClick:function(){return console.log("favorite clicked")},"data-v-54995c49":"",children:Object(u.jsx)(i.o,{icon:l.k,size:"large","data-v-54995c49":""})}),Object(u.jsx)(i.s,{color:"danger",onClick:function(){return console.log("share clicked")},"data-v-54995c49":"",children:Object(u.jsx)(i.o,{icon:l.u,size:"large","data-v-54995c49":""})})]}),Object(u.jsxs)(i.r,{className:"".concat(!t&&Object.keys(r.signatures).length>1?"with-parent":""," ").concat(s?"attested pos_"+c:"not_attested pos_"+c),detail:!1,button:!0,onClick:function(){d.push("/doc/show/"+a)},"data-v-54995c49":"",children:[Object(u.jsx)("div",{className:"IconContainer","data-v-54995c49":"",children:Object(u.jsx)(i.o,{icon:l.l,color:s?"success":"primary",size:"large","data-v-54995c49":""})}),Object(u.jsx)(i.v,{className:"ion-text-wrap","data-v-54995c49":"",children:Object(u.jsx)("h2",{"data-v-54995c49":"",children:Object(b.a)(a)})}),p?void 0:n?Object(u.jsx)(i.b,{className:"AddButton","data-v-54995c49":"",children:"Needs attestation"}):Object(u.jsx)(i.b,{className:"AddButton","data-v-54995c49":"",children:"Already attested"})]})]})})),f=a(714),v=a(718),m=a(729),h=(a(153),a(122)),O=[{selector:".attestation-step-upload-button",content:"Upload a photo you wish to attest and publish."},{selector:".attested.pos_0",content:"Our photo has been attested. Click on it to confirm both signatures are valid."},{selector:".attested.pos_0",content:"Our photo has been attested. Click on it to confirm both signatures are valid."}],g=[{selector:".not_attested.pos_0",content:"Attestor received a photo to review. Attest it now by clicking on it."},{selector:".not_attested.pos_0",content:"Attestor received a photo to review. Attest it now by clicking on it."}],x=Object(s.connect)((function(e){return{connected:Object(d.c)(e),bags:Object(d.a)(e),bagsData:Object(d.b)(e),documentsCompleted:Object(d.f)(e),documentsAwaitingSignature:Object(d.e)(e),documentsAddressesInOrder:Object(d.d)(e),isLoading:e.reducer.isLoading,searchText:e.reducer.searchText,platform:e.reducer.platform,user:e.reducer.user}}),(function(e){return{}}))((function(e){Object(o.useHistory)();var t=Object(h.b)(),a=t.setIsOpen,s=t.setCurrentStep,c=t.setSteps;Object(r.useEffect)((function(){var t=parseInt(localStorage.getItem("tour")||"0");"publisher"===e.user&&t<=2&&!e.bagId&&(c(O),localStorage.getItem("tour")&&setTimeout((function(){a(!1),s(t),a(!0)}),100)),"attestor"!==e.user||e.bagId||(c(g),setTimeout((function(){a(!1),s(0),a(!0)}),100)),a(!1)}),[]);return"show"===e.action?Object(u.jsx)(i.j,{children:Object(u.jsx)(v.a,{registryUri:e.registryUri,bagId:e.bagId})}):"upload"===e.action?Object(u.jsx)(i.j,{children:Object(u.jsx)(m.a,{})}):Object(u.jsxs)(i.j,{children:[(e.platform,void 0),Object(u.jsx)(p,{}),"list"===e.action?Object(u.jsx)(u.Fragment,{children:e.isLoading?Object(n.a)(Array(10)).map((function(e,t){return Object(u.jsx)(f.a,{id:t.toString()},t)})):e.documentsAddressesInOrder.map((function(t,a){return Object(u.jsx)(j,{pos:a.toString(),registryUri:e.registryUri,id:t,bag:e.bags[t],folder:e.bagsData[t],onlyCompleted:!1,awaitsSignature:!!e.documentsAwaitingSignature[t],completed:!!e.documentsCompleted[t]},t)}))}):void 0]})}));t.default=x}}]);
//# sourceMappingURL=5.d9f1b81d.chunk.js.map